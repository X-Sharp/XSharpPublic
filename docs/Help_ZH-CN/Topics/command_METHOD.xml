<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" modified="2025-02-14T19:41:00.411+08:00" lasteditedby="niuji" version="2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title>METHOD 语句</title>
  <keywords>
    <keyword>Classes<keyword>declaring() Methods</keyword></keyword>
    <keyword>Compiledeclaration</keyword>
    <keyword>Declaration statements</keyword>
    <keyword>Entity declaration</keyword>
    <keyword>METHOD statement</keyword>
    <keyword>Statements</keyword>
    <keyword>Strong typing<keyword>defined</keyword></keyword>
  </keywords>
  <body>
    <header>
      <para styleclass="Heading1">METHOD 语句</para>
    </header>
    <para styleclass="Heading1">用途</para>
    <para styleclass="Normal">声明一个方法名和一个可选的局部变量名列表。</para>
    <para styleclass="Heading1">语法</para>
    <para styleclass="Normal"><tab />[Attributes] [Modifiers] &#160;<text style="font-weight:bold;">METHOD </text>&lt;<text styleclass="Italic">idMethod</text>&gt; </para>
    <para styleclass="Normal"><tab />[Typeparameters]</para>
    <para styleclass="Normal"><tab />[([&lt;<text styleclass="Italic">idParam</text>&gt; [AS | REF|OUT|IN &lt;<text styleclass="Italic">idType</text>&gt;] [, ...])] </para>
    <para styleclass="Normal"><tab />[AS &lt;<text styleclass="Italic">idType</text>&gt;]</para>
    <para styleclass="Normal"><tab />[TypeparameterConstraints]</para>
    <para styleclass="Normal"><tab />[&lt;<text styleclass="Italic">idConvention</text>&gt;]<br/><tab />[CLASS &lt;<text styleclass="Italic">idClass</text>&gt;]</para>
    <para styleclass="Normal"><tab />[=&gt; &lt;expression&gt;] <br/><tab /><text style="font-weight:bold;">CRLF</text></para>
    <para styleclass="Normal"><tab />[&lt;<text styleclass="Italic">Body</text>&gt;]</para>
    <para styleclass="Normal"><tab />[END METHOD]</para>
    <para styleclass="Heading1">参数</para>
    <para styleclass="Normal"><snippet src="__IncludeMethodModifiers" inline="false"/></para>
    <para styleclass="List">&lt;idMethod&gt;<tab />方法的有效标识符名称。 方法名称在类中必须是唯一的，但可以与应用程序中的其他实体(包括访问和赋值方法)共享相同的名称。</para>
    <para styleclass="List"></para>
    <para styleclass="List"><snippet src="__IncludeMethodParameters" inline="false"/></para>
    <para styleclass="Heading1"><snippet src="__IncludeBody" inline="false"/></para>
    <para styleclass="List"><snippet src="__IncludeEndMethod" inline="false"/></para>
    <para styleclass="Heading1">描述</para>
    <para styleclass="Normal">方法是一个子程序，由一系列声明和语句组成，每当使用信息发送操作符引用方法时，都会执行这些声明和语句：</para>
    <para styleclass="Code Example">&lt;idObject&gt;:&lt;idMethod&gt;([&lt;uArgList&gt;])</para>
    <para styleclass="Normal">或</para>
    <para styleclass="Code Example">SELF:&lt;idMethod&gt;([&lt;uArgList&gt;])</para>
    <para styleclass="Normal">类、实例变量(参见本指南中的 <link displaytype="text" defaultstyle="true" type="topiclink" href="command_CLASS">CLASS 语句</link>)和方法是面向对象编程的基本单元。 您将在应用程序中使用方法来组织特定对象类的计算代码块。</para>
    <para styleclass="Heading1">备注</para>
    <para styleclass="Normal">VO 兼容性：</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">VO 有两个特殊的方法名称，用于构造和销毁类对象： Init() 和 Axit()。</para>
    <para styleclass="Normal">在 X# 中，这些方法应被命名为 <link displaytype="text" defaultstyle="true" type="topiclink" href="command_CONSTRUCTOR">CONSTRUCTOR</link> 和 <link displaytype="text" defaultstyle="true" type="topiclink" href="command_DESTRUCTOR">DESTRUCTOR</link>。</para>
    <para styleclass="Normal">如果使用编译器选项 <link displaytype="text" defaultstyle="true" type="topiclink" href="opt-vo1">/vo1</link> 进行编译，则仍可使用 &quot;旧 &quot;名称。编译器会自动将 Init() 方法映射为构造函数，将 Axit() 方法映射为析构函数。不建议这样做。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">Init() 方法：如果定义了名为 Init() 的方法，那么在创建该方法所属类的实例时，就会自动调用该方法。 实例化操作符（{}）中列出的参数将作为参数传递给 Init() 方法。 Init() 方法的常见用途包括初始化实例变量、分配对象所需的内存、注册对象、创建附属对象以及建立对象之间的关系。</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">Axit() 方法： &#160;由于垃圾回收器会自动处理对象使用的内存，因此无需重新分配内存。 不过，在某些情况下，对象可以管理其他需要妥善处置的资源。 例如，如果一个对象只为自己的使用而打开一个数据库，那么它就应该在使用完毕后关闭该数据库，并将工作区用于其他用途。</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">如果使用 RegisterAxit() 函数（例如在 Init() 方法中）注册一个对象，并提供一个名为 Axit() 的方法，垃圾回收器就会在对象销毁前自动调用该 Axit() 方法。 因此，您可以在 Axit() 方法中关闭数据库、去分配内存或关闭通信链路。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">NoIVarGet()/NoIVarPut() 方法： &#160;如果定义了名为 NoIVarGet() 和 NoIVarPut() 的方法，在引用不存在的实例变量时，它们将被自动调用。 调用时会将实例变量的名称作为参数，以符号的形式调用，而在 NoIVarPut() 的情况下，还会调用赋值。 这一功能对于检测和防止运行时错误以及在运行时动态创建虚拟变量非常有用。 例如，DBServer 类使用这种技术使数据库字段看起来像是数据库对象的导出实例变量：</text></para>
    <para styleclass="Code Example"><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:normal; font-style:normal; color:#000000;"> NoIVarGet(symFieldName) </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:normal; font-style:normal; color:#000000;"> DBServer</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">BEGIN</text><text style="font-weight:normal; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SEQUENCE</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">RETURN</text><text style="font-weight:normal; font-style:normal; color:#000000;"> FieldGetAlias(symAlias, symFieldName)</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">RECOVER</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160;</text><text style="font-weight:bold; font-style:italic; color:#339966;">// Pass it up if it was not a field name</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SUPER</text><text style="font-weight:normal; font-style:normal; color:#000000;">:NoIVarGet(symFieldName)</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">END</text><text style="font-weight:normal; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SEQUENCE</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:normal; font-style:normal; color:#000000;"> NoIVarPut(symFieldName, uValue) ;</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:normal; font-style:normal; color:#000000;"> DBServer</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">BEGIN</text><text style="font-weight:normal; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SEQUENCE</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">RETURN</text><text style="font-weight:normal; font-style:normal; color:#000000;"> FieldGetAlias(symAlias, ;</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160; &#160; symFieldName, uValue)</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">RECOVER</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160;</text><text style="font-weight:bold; font-style:italic; color:#339966;">// Pass it up if it was not a field name</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; &#160; &#160;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SUPER</text><text style="font-weight:normal; font-style:normal; color:#000000;">:NoIVarPut(symFieldName, uValue)</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">END</text><text style="font-weight:normal; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SEQUENCE</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">FUNCTION</text><text style="font-weight:normal; font-style:normal; color:#000000;"> DatabaseTest()</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">LOCAL</text><text style="font-weight:normal; font-style:normal; color:#000000;"> oDBServer </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:normal; font-style:normal; color:#000000;"> DBServer</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; oDBServer := DBServer{&quot;customer&quot;}</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; ? oDBCustomer:CustName</text><br/><text style="font-weight:normal; font-style:normal; color:#000000;"> &#160; oDBCustomer:ZipCode := &quot;12345&quot;</text></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">NoMethod() 方法： &#160;如果你定义了一个名为 NoMethod() 的方法，当你在同一类中调用的方法名称找不到时，它将自动被调用。 传递的参数将与原始方法相同。 这一功能有助于检测和防止在找不到方法时出现运行时错误。 使用 NoMethod() 函数可找出无法找到的方法名称。</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">通过代码块导出局部变量： &#160;创建代码块时，可以在代码块定义中访问创建实体中定义的局部变量，而无需将其作为参数传递（即局部变量对代码块是可见的）。 利用这一事实以及可以将代码块作为参数传递的事实，就可以导出局部变量。 例如</text></para>
    <para styleclass="Code Example"><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> One</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">()</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> MyClass </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">EXPORT</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">LOCAL</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">LOCAL</text><text style="font-weight:bold; font-style:normal; color:#000000;"> nVar </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">10</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">INT</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cbAdd </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CODEBLOCK</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">cbAdd </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">{</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">|</text><text style="font-weight:bold; font-style:normal; color:#000000;">nValue</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">|</text><text style="font-weight:bold; font-style:normal; color:#000000;"> nValue </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">+</text><text style="font-weight:bold; font-style:normal; color:#000000;"> nVar</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">}</text><br/><br/><tab /><text style="font-weight:bold; font-style:normal; color:#0000ff;">?</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SELF</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:</text><text style="font-weight:bold; font-style:normal; color:#000000;">Two</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cbAdd</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#ff00ff;">// Result: &#160;210</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Two</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cbAddEmUp</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> MyClass</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">RETURN</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">EVAL</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cbAddEmUp</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,200)</text></para>
    <para styleclass="Normal">当代码块在 Two() 中求值时，方法 One() 本地的 nVar 变为可见，尽管它没有直接作为参数传递。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">调用方法：调用对象方法的语法如下：</para>
    <para styleclass="Code Example">&lt;idObject&gt;:&lt;idMethod&gt;([&lt;uArgList&gt;])</para>
    <para styleclass="Normal">其中 &lt;uArgList&gt; 是一个可选的逗号分隔参数列表，用于将参数传递给指定的方法。 &lt;idObject&gt; 标识了方法调用要发送的对象；要在方法中引用同一对象，请使用 SELF: 或 SUPER:（见下文注释），而不是 &lt;idObject&gt;:。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">您可以在表达式中调用方法，也可以作为程序语句调用方法。 如果作为程序语句调用，返回值将被忽略。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">您也可以将方法调用作为别名表达式使用，方法调用前加上别名并用括号括起来：</para>
    <para styleclass="Code Example">&lt;idAlias&gt;-&gt;(&lt;idObject&gt;:&lt;idMethod&gt;([&lt;uArgList&gt;]))</para>
    <para styleclass="Normal">执行此操作后，与 &lt;idAlias&gt; 关联的工作区将被选中，方法将被执行，原始工作区将被重新选中。 你可以将别名表达式指定为程序语句，就像指定其他表达式一样。</para>
    <para styleclass="Normal">方法可以递归调用自身。 这意味着你可以在一个方法的 &lt;MethodBody&gt; 中引用该方法。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">使用 HIDDEN 和 PROTECT 修饰符也可以影响类型化方法的可见性，就像使用实例变量一样。 子类的方法不能调用父类中 HIDDEN 方法的超级调用。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">调用约定：方法使用 CLIPPER 调用约定，除非它们是强类型的。 更多信息，请参阅本指南中的 FUNCTION 语句。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">SELF 和 SUPER：SELF 是一个特殊变量，其中包含一个对象的引用，该对象是消息的接收者(每次使用发送操作符调用方法或访问实例变量时，都会向对象发送一条消息)。 每当向对象发送一条消息时，都会在调用相应方法前将对象的引用放入 SELF 中。 在类的方法中，必须使用 SELF 和消息发送操作符 (:) 才能向当前对象发送消息。 使用 SELF: 访问实例变量是可选的；有关何时需要使用 SELF: 的详细信息，请参阅本指南中的 ACCESS 和 ASSIGN 条目(始终允许使用)。</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal">SUPER 是另一个特殊变量，它包含一个指向方法查找对象最近祖先的类的引用。 它将信息沿着继承树向上传递到相应的超类，只有在当前对象的类继承自另一个类时才有意义。 您可以使用 SUPER 和消息发送操作符 (:) 直接引用超类中定义的方法。 如果在子类中重新定义了一个方法（通过创建与超类中的方法同名的方法），SUPER 是使用超类版本覆盖重新定义的方法的唯一方法。</para>
    <para styleclass="Normal">SUPER: 在定义子类时非常有用，它可以添加一些独特的行为，但仍然继承了超类的标准行为。 例如</para>
    <para styleclass="Code Example"><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Person</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">PROTECT</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cName </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">STRING</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> symName </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SYMBOL</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Init</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cFirstName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cLastName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Person</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">cName </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cFirstName </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">+</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">&quot; &quot;</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">+</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cLastName</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">symName </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;"> String2Symbol</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Customer </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">INHERIT</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Person</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">PROTECT</text><text style="font-weight:bold; font-style:normal; color:#000000;"> wCustNo </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">DWORD</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Init</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cFirstName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cLastName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> nCustNo</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">;</text><br/><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Customer</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">SUPER</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:</text><text style="font-weight:bold; font-style:normal; color:#000000;">Init</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">cFirstName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> cLastName</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">wCustNo </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;"> nCustNo</text></para>
    <para styleclass="Normal">SELF 和 SUPER 变量只允许在方法定义中使用。 SELF 是所有方法的默认返回值。</para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"><text styleclass="BoldItalic" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">参数：除了在 METHOD 声明语句中指定方法参数外，还可以使用 PARAMETERS 语句来指定参数。 但不推荐这种做法，因为它效率较低，而且不提供编译时完整性验证。 有关详细信息，请参阅本指南中的 PARAMETERS 语句。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:16px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:64px left ;"><snippet src="__IncludeStrongTyping" inline="false"/></para>
    <para styleclass="Heading1">用单一表达式代替主体(main body)的方法</para>
    <para styleclass="Normal">方法(以及其他所有可以包含代码的实体类型)可以在定义实体的同一行代码中使用 =&gt; 操作符，而不是使用正文(regular body)，将代码包含为一个单一表达式。单一表达式可以返回值，也可以不返回值：</para>
    <para styleclass="Code Example"><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:normal; font-style:normal; color:#000000;"> SimpleMethod() </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS VOID</text><text style="font-weight:normal; font-style:normal; color:#000000;"> =&gt; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SELF</text><text style="font-weight:normal; font-style:normal; color:#000000;">:CallAnotherMethod()</text><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:normal; font-style:normal; color:#000000;"> SimpleMethodWithReturnValue() </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS INT</text><text style="font-weight:normal; font-style:normal; color:#000000;"> =&gt; </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SELF</text><text style="font-weight:normal; font-style:normal; color:#000000;">:nSomeIvar + 1</text></para>
    <para styleclass="Heading1">示例</para>
    <para styleclass="Normal">该示例创建了一个二维坐标类，其中包含初始化坐标、绘制表格和绘制点的方法：</para>
    <para styleclass="Normal"></para>
    <para styleclass="Code Example"><text style="font-weight:bold; font-style:normal; color:#ff0000;">FUNCTION</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Start</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">()</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">LOCAL</text><text style="font-weight:bold; font-style:normal; color:#000000;"> oPointSet </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Point2D</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">oPointSet </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Point2D</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">{</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">2,</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">3</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">}</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">oPointSet</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:</text><text style="font-weight:bold; font-style:normal; color:#000000;">ShowGrid</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">()</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">oPointSet</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:</text><text style="font-weight:bold; font-style:normal; color:#000000;">Plot</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">()</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Point2D</text><tab /><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#ff00ff;">// Define Point2D class</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">INSTANCE</text><text style="font-weight:bold; font-style:normal; color:#000000;"> x</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> y </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">INT</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Init</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#000000;">iRow</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCol</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">)</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Point2D</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">x </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iRow</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">y </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCol</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">RETURN</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">SELF</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Plot</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">()</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Point2D</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#0000ff;">@</text><text style="font-weight:bold; font-style:normal; color:#000000;"> x </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">+</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">11,</text><text style="font-weight:bold; font-style:normal; color:#000000;"> y </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">+</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">36</text><text style="font-weight:bold; font-style:normal; color:#000000;"> SAY </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CHR</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(249)</text><br/><br/><text style="font-weight:bold; font-style:normal; color:#ff0000;">METHOD</text><text style="font-weight:bold; font-style:normal; color:#000000;"> ShowGrid</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">()</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CLASS</text><text style="font-weight:bold; font-style:normal; color:#000000;"> Point2D</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">LOCAL</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCounter </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">AS</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">INT</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#000000;">CLS</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">FOR</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCounter </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">:=</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">1</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">TO</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">21</text><br/><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">IF</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCounter </text><text style="font-weight:bold; font-style:normal; color:#0000ff;">=</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">11</text><br/><tab /><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#0000ff;">@</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCounter</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">1</text><text style="font-weight:bold; font-style:normal; color:#000000;"> SAY </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">REPLICATE</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(</text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CHR</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(196),</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">71)</text><br/><tab /><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#0000ff;">@</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCounter</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">36</text><text style="font-weight:bold; font-style:normal; color:#000000;"> SAY </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CHR</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(197)</text><br/><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">ELSE</text><br/><tab /><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#0000ff;">@</text><text style="font-weight:bold; font-style:normal; color:#000000;"> iCounter</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">,</text><text style="font-weight:bold; font-style:normal; color:#000000;">&#32;</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">36</text><text style="font-weight:bold; font-style:normal; color:#000000;"> SAY </text><text style="font-weight:bold; font-style:normal; color:#ff0000;">CHR</text><text style="font-weight:bold; font-style:normal; color:#0000ff;">(179)</text><br/><tab /><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">ENDIF</text><br/><tab /><text style="font-weight:bold; font-style:normal; color:#ff0000;">NEXT</text></para>
    <para styleclass="Heading1">参见</para>
    <para styleclass="Normal"><link displaytype="text" defaultstyle="true" type="topiclink" href="command_ACCESS">ACCESS</link><text styleclass="Bold" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">, </text><link displaytype="text" defaultstyle="true" type="topiclink" href="command_ASSIGN">ASSIGN</link><text styleclass="Bold" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">, </text><link displaytype="text" defaultstyle="true" type="topiclink" href="command_CLASS">CLASS</link><text styleclass="Bold" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">, </text><link displaytype="text" defaultstyle="true" type="topiclink" href="command_FUNCTION">FUNCTION</link><text styleclass="Bold" style="font-family:Arial; font-size:10pt; font-weight:normal; font-style:normal; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;">, </text><link displaytype="text" defaultstyle="true" type="topiclink" href="command_PROPERTY">PROPERTY</link>, <link displaytype="text" defaultstyle="true" type="topiclink" href="command_OPERATOR">OPERATOR</link>, <link displaytype="text" defaultstyle="true" type="topiclink" href="command_CONSTRUCTOR">CONSTRUCTOR</link>, <link displaytype="text" defaultstyle="true" type="topiclink" href="command_DESTRUCTOR">DESTRUCTOR</link>, <link displaytype="text" defaultstyle="true" type="topiclink" href="command_EVENT">EVENT</link></para>
  </body>
</topic>
