<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Condition="Exists('$(MsBuildBinPath)\Microsoft.Common.props')" Project="$((MsBuildBinPath)\Microsoft.Common.props"  />
  <PropertyGroup>
    <XSharpDefaultProps>true</XSharpDefaultProps>
    <BuildInParallel Condition="'$(BuildInParallel)' == ''">true</BuildInParallel>
    <DefaultLanguageSourceExtension>.prg</DefaultLanguageSourceExtension>
    <DefaultProjectTypeGuid Condition=" '$(DefaultProjectTypeGuid)' == '' ">{AA6C8D78-22FF-423A-9C7C-5F2393824E04}</DefaultProjectTypeGuid>
    <ProjectSystemBase>$(MSBuildThisFileDirectory)</ProjectSystemBase>
    <ProjectName>$(MSBuildProjectName)</ProjectName>
    <ProjectExt>$(MSBuildProjectExtension)</ProjectExt>
    <ProjectDir>$(MSBuildProjectDirectory)\</ProjectDir>
    <ProjectFileName>$(MSBuildProjectFile)</ProjectFileName>
    <ProjectPath>$(MSBuildProjectDirectory)\$(MSBuildProjectFile)</ProjectPath>
    <TargetPlatformVersion>7.0</TargetPlatformVersion>
    <UseOSWinMdReferences>true</UseOSWinMdReferences>
    <OutputType Condition=" '$(OutputType)' == '' ">exe</OutputType>
    <OutputPath Condition=" '$(OutputPath)' == '' ">bin\$(Configuration)\</OutputPath>
    <Name>$(MSBuildProjectName)</Name>
    <RootNamespace>$(Name)</RootNamespace>
    <AssemblyName>$(Name)</AssemblyName>
    <Dialect>Core</Dialect>
    <UseNativeVersion>false</UseNativeVersion>
    <SuppressRCWarnings>true</SuppressRCWarnings>
    <VOBinaryFiles>**\*.xsfs;**\*.xsdbs;**\*.xsmnu;**\*.xsfrm;**\*.xsrep;**\*.xssql;**/*.vnfs;**/*.vndbs;**/*.vnmnu;**/*.vnfrm</VOBinaryFiles>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <GenerateFullPaths>true</GenerateFullPaths>
    <Nologo>true</Nologo>
    <UseHostCompilerIfAvailable>false</UseHostCompilerIfAvailable>
    <UseSharedCompilation>true</UseSharedCompilation>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <!-- Set defaults for Configuration, Platform, Optimize and PDB generation -->
  <PropertyGroup>
    <Configuration Condition="'$(Configuration)' == ''" >Debug</Configuration>
    <Platform      Condition="'$(Platform)' == ''" >AnyCPU</Platform>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Debug'" >
    <Optimize>false</Optimize>
    <EmitDebugInformation>true</EmitDebugInformation>
    <DebugType>full</DebugType>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'" >
    <Optimize>true</Optimize>
    <EmitDebugInformation>true</EmitDebugInformation>
    <DebugType>pdbonly</DebugType>
    <DefineConstants>TRACE</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition="'$(UsingMicrosoftNETSdk)' == 'true'">
    <!-- Make sure these items are excluded by the SDK props and targets -->
    <DefaultItemExcludes>$(VOBinaryFiles);**/*.rc;**/*.resx;**/*.designer.prg</DefaultItemExcludes>
  </PropertyGroup>

  <ItemGroup  Condition="'$(UsingMicrosoftNETSdk)' == 'true'">
    <!-- Add our own definitions for the VOBinary items with calculated dependentupon properti -->
    <VOBinary Include="$(VOBinaryFiles)"  KeepDuplicates="false">
       <ParentName>$([System.Text.RegularExpressions.Regex]::Replace('%(Filename)%(Extension)', '\.[^.]+\%(Extension)$', '.prg', System.Text.RegularExpressions.RegexOptions.IgnoreCase))</ParentName>
       <DependentUpon Condition="Exists('%(ParentName)')">%(ParentName)</DependentUpon>
    </VOBinary>
    <NativeResource Include="**/*.rc" >
      <ParentName>$([System.Text.RegularExpressions.Regex]::Replace('%(Filename)%(Extension)', '\.[^.]+\.rc$', '.prg', System.Text.RegularExpressions.RegexOptions.IgnoreCase))</ParentName>
      <DependentUpon Condition="Exists('%(ParentName)')">%(ParentName)</DependentUpon>
    </NativeResource >
    <Compile Include="**/*.designer.prg"  KeepDuplicates="false" >
      <!-- Designer.prg can depend on prg, resx or settings -->
      <ParentPrgName>$([System.Text.RegularExpressions.Regex]::Replace('%(Filename)%(Extension)', '.designer.prg$', '.prg', System.Text.RegularExpressions.RegexOptions.IgnoreCase))</ParentPrgName>
      <ParentResxName>$([System.Text.RegularExpressions.Regex]::Replace('%(Filename)%(Extension)', '.designer.prg$', '.resx', System.Text.RegularExpressions.RegexOptions.IgnoreCase))</ParentResxName>
      <ParentSettingsName>$([System.Text.RegularExpressions.Regex]::Replace('%(Filename)%(Extension)', '.designer.prg$', '.settings', System.Text.RegularExpressions.RegexOptions.IgnoreCase))</ParentSettingsName>
      <DependentUpon Condition="Exists('%(ParentPrgName)')">%(ParentPrgName)</DependentUpon>
      <DependentUpon Condition="Exists('%(ParentResxName)')">%(ParentResxName)</DependentUpon>
      <DependentUpon Condition="Exists('%(ParentSettingsName)')">%(ParentSettingsName)</DependentUpon>
    </Compile>
    <EmbeddedResource Include="**/*.resx"   KeepDuplicates="false">
      <!-- This handles form.resx that depends on form.prg -->
      <ParentName>$([System.Text.RegularExpressions.Regex]::Replace('%(Filename)%(Extension)', '.resx$', '.prg', System.Text.RegularExpressions.RegexOptions.IgnoreCase))</ParentName>
      <DependentUpon Condition="Exists('%(ParentName)')">%(ParentName)</DependentUpon>
    </EmbeddedResource>
  </ItemGroup>
  <!-- Implicit imports -->
  <ItemGroup Condition="'$(ImplicitUsings)' == 'true' Or '$(ImplicitUsings)' == 'enable'">
    <Using Include="System" />
    <Using Include="System.Collections.Generic" />
    <Using Include="System.IO" />
    <Using Include="System.Linq" />
    <Using Include="System.Net.Http" Condition="'$(TargetFrameworkIdentifier)' != '.NETFramework'"/>
    <Using Include="System.Threading" />
    <Using Include="System.Threading.Tasks" />
  </ItemGroup>

</Project>