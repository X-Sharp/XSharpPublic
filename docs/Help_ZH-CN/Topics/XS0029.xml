<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" modified="2024-07-26T12:07:29.905+08:00" lasteditedby="niuji" version="2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title>XS0029</title>
  <keywords>
    <keyword>XS0029</keyword>
  </keywords>
  <body>
    <header>
      <para styleclass="Heading1">Error XS0029</para>
    </header>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">无法将类型 &apos;</text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">type&apos; </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">隐式转换为 &apos;</text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">type&apos;</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">编译器要求显式转换。 例如，可能需要将右值转换成与左值相同的类型。 或者必须提供转换例程以支持某些运算符重载。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">在将某个类型的变量赋给其他类型的变量时必须进行转换。 在不同类型的变量之间进行赋值时，编译器必须将赋值运算符右边的类型转换为赋值运算符左边的类型。 以下面的代码为例：</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">i = lng; </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">进行赋值运算，但赋值运算符左右两边变量的数据类型不匹配。 进行赋值前，编译器将变量 </text><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">lng</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">(类型为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">long</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">)隐式转换为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">。此为隐式转换，因为没有代码显式指示编译器执行此转换。 此代码的问题在于上述转换被视为收缩转换，但由于可能会丢失数据，所以编译器不允许进行隐式收缩转换。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">如果转换后的数据类型所占用的内存存储空间比转换前的数据类型所占用的少，则存在收缩转换。 例如，将 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">long </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型转换为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型可视为收缩转换。 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">long </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型占用 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">8 </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">个字节的内存，而 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型只占用 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">4 </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">个字节。 若要查看数据丢失如何发生，请考虑以下示例：</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Code with box"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">变量 </text><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">lng </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">现在包含的值因过大而无法存储在变量 </text><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">i </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">中。 如果要将该值转换为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型，就会丢失一些数据，并且转换后的值不同于转换前的值。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">扩大转换与收缩转换相反。 对于扩大转换，转换后的数据类型占用的内存存储空间比转换前的数据类型占用的多。 下面是一个扩大转换示例：</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="Code with box"></para>
    <para styleclass="Normal"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">请注意此代码示例和第一个示例之间的区别。 此示例中，变量 </text><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">lng </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">位于赋值运算符的左边，所以它是赋值目标。 在可以进行赋值前，编译器必须将变量 </text><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">i</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">(类型为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">)隐式转换为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">long </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型。 这是一个扩大转换，因为是从占用 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">4 </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">个字节内存的类型 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">(int) </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">转换为占用 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">8 </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">个字节内存的类型 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">(long)</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">。 由于不会发生数据丢失，所以允许进行隐式扩大转换。任何可存储于 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型的值也可存储于 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">long </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">由于不允许进行隐式收缩转换，因此为了能够编译此代码，需要显式转换数据类型。 使用强制转换完成显式转换。 强制转换是 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">X# </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">中用来描述将一种数据类型转换为另一种数据类型的术语。 若要编译代码，需使用以下语法：</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">第三行代码告知编译器在进行赋值前，将变量 </text><text styleclass="" style="font-family:Consolas; font-size:10pt; color:#161616;">lng</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">(类型为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">long</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">)显式转换为 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">int </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">类型。切记，使用收缩转换可能会丢失数据。 应小心使用收缩转换，即使可以编译代码，也可能会在运行时获得意外结果。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">此讨论只针对值类型。 使用值类型就是直接使用存储在变量中的数据。 但是，</text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">.NET </text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">也具有引用类型。 使用引用类型就是使用对变量的引用，而不是使用实际数据。 引用类型的示例包括类、接口和数组。 不能隐式或显式地将一个引用类型转换为其他引用类型，除非编译器允许特定的转换或可以实现相应的转换运算符。</text></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"></para>
    <para styleclass="" style="text-align:left; text-indent:0px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:transparent; white-space:normal; page-break-inside:auto; page-break-after:auto; border:none; tabstops:none;"><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">以下示例生成 </text><text styleclass="" style="font-family:'Segoe UI'; font-size:11pt; color:#161616;">CS0029</text><text styleclass="" style="font-family:'Microsoft YaHei'; font-size:11pt; color:#161616;">：</text></para>
    <para styleclass="Normal"></para>
    <para styleclass="Normal"></para>
    <para styleclass="Code with box"></para>
    <para styleclass="Normal"></para>
  </body>
</topic>
